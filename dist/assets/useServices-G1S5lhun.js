import{u as m}from"./services-T7CBbn_K.js";import{v as y}from"./v4-Ch9TGLTe.js";import{r as o,m as h,q as w,u as f}from"./index-Bcr3mXlA.js";const S=()=>o({page:1,perPage:10,total:0}),A=()=>o({sortBy:"fullname",sortingOrder:null}),B=()=>o({isActive:!0,search:""}),D=O=>{const t=o(!1),u=o(),n=m(),{filters:l=B(),sorting:r=A(),pagination:s=S()}={},i=async()=>{t.value=!0;try{await n.getAll({filters:f(l),sorting:f(r),pagination:f(s)}),s.value=n.pagination}finally{t.value=!1}};h(l,()=>{s.value.page=1,i()},{deep:!0}),i();const d=w(()=>{const a=(c,v)=>c[v],e=n.items.slice((s.value.page-1)*s.value.perPage,s.value.page*s.value.perPage);return r.value.sortBy&&r.value.sortingOrder&&e.sort((c,v)=>{const p=a(c,r.value.sortBy),g=a(v,r.value.sortBy);return p>g?r.value.sortingOrder==="asc"?1:-1:p<g?r.value.sortingOrder==="asc"?-1:1:0}),e});return{error:u,isLoading:t,filters:l,sorting:r,pagination:s,services:d,fetch:i,async add(a){t.value=!0;try{return await n.add(a)}catch(e){u.value=e}finally{t.value=!1}},async update(a){t.value=!0;try{return await n.update(a)}catch(e){u.value=e}finally{t.value=!1}},async remove(a){t.value=!0;try{return await n.remove(a)}catch(e){u.value=e}finally{t.value=!1}},async uploadAvatar(a){const e=new FormData;return e.append("avatar",a),e.append("id",y()),n.uploadAvatar(e)}}};export{D as u};
//# sourceMappingURL=useServices-G1S5lhun.js.map

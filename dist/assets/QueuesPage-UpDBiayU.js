import{u as I,Q as $,_ as q}from"./EditQueueForm.vue_vue_type_script_setup_true_lang-C8ah80dO.js";import{u as z}from"./index-npWqo0Ou.js";import{d as O,r as g,k as D,l as N,f as n,b as j,c as R,e as f,h as t,w as u,u as s,i as H,t as L,F as P}from"./index-Bcr3mXlA.js";import"./queues-ahqpviki.js";import"./useForm-fy7gsO6_.js";import"./users-DylJnNym.js";import"./services-T7CBbn_K.js";import"./utils-DvwhG7-T.js";const W={class:"flex flex-col md:flex-row gap-2 mb-2 justify-between"},G={class:"flex flex-col md:flex-row gap-2 justify-start"},J={class:"va-h5"},ne=O({__name:"QueuesPage",setup(K){const r=g(!1),{queues:V,isLoading:b,filters:d,sorting:i,pagination:_,error:c,...p}=I({lazy:!1}),l=g(null),y=o=>{l.value=o,r.value=!0},w=()=>{l.value=null,r.value=!0},C=async o=>{l.value?(await p.update(o),c.value||m({message:`${o.fullname} has been updated`,color:"success"})):(await p.add(o),c.value||m({message:`Ticket ${o.number} has been created`,color:"success"}))},{init:m}=D();N(()=>{c.value&&m({message:c.value.message,color:"danger"})});const Q=async o=>{await p.remove(o),m({message:`Ticket ${o.number} for ${o.service.name} has been deleted`,color:"success"})},v=g(),{confirm:h}=z(),x=async o=>{v.value.isFormHasUnsavedChanges?await h({maxWidth:"380px",message:"Form has unsaved changes. Are you sure you want to close it?",size:"small"})&&o():o()};return(o,e)=>{const B=n("VaButtonToggle"),k=n("VaIcon"),A=n("VaInput"),E=n("VaButton"),F=n("VaCardContent"),T=n("VaCard"),M=n("VaModal");return j(),R(P,null,[e[6]||(e[6]=f("h1",{class:"page-title"},"Queues",-1)),t(T,null,{default:u(()=>[t(F,null,{default:u(()=>[f("div",W,[f("div",G,[t(B,{modelValue:s(d).isActive,"onUpdate:modelValue":e[0]||(e[0]=a=>s(d).isActive=a),color:"background-element","border-color":"background-element",options:[{label:"Open",value:!0},{label:"Finished",value:!1}]},null,8,["modelValue"]),t(A,{modelValue:s(d).search,"onUpdate:modelValue":e[1]||(e[1]=a=>s(d).search=a),placeholder:"Search"},{prependInner:u(()=>[t(k,{name:"search",color:"secondary",size:"small"})]),_:1},8,["modelValue"])]),t(E,{onClick:w},{default:u(()=>e[5]||(e[5]=[H("Add Queue")])),_:1})]),t($,{"sort-by":s(i).sortBy,"onUpdate:sortBy":e[2]||(e[2]=a=>s(i).sortBy=a),"sorting-order":s(i).sortingOrder,"onUpdate:sortingOrder":e[3]||(e[3]=a=>s(i).sortingOrder=a),queues:s(V),loading:s(b),pagination:s(_),onEditQueue:y,onDeleteQueue:Q},null,8,["sort-by","sorting-order","queues","loading","pagination"])]),_:1})]),_:1}),t(M,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value=a),size:"small","mobile-fullscreen":"","close-button":"","hide-default-actions":"","before-cancel":x},{default:u(({cancel:a,ok:S})=>[f("h1",J,L(l.value?"Edit queue":"Add queue"),1),t(q,{ref_key:"editFormRef",ref:v,queue:l.value,"save-button-label":l.value?"Save":"Add",onClose:a,onSave:U=>{C(U),S()}},null,8,["queue","save-button-label","onClose","onSave"])]),_:1},8,["modelValue"])],64)}}});export{ne as default};
//# sourceMappingURL=QueuesPage-UpDBiayU.js.map

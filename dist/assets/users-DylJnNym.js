import{a as n,y as d}from"./index-Bcr3mXlA.js";const l=async e=>{const{isActive:t,search:s}=e;let a=await n.request(n.allUsers());console.log(a),a=a.filter(r=>r.disabled===!t),s&&(a=a.filter(r=>{let i;return((i=r.profile)==null?void 0:i.fullname.toLowerCase().includes(s.toLowerCase()))||r.username.toLowerCase().includes(s.toLowerCase())||r.email.toLowerCase().includes(s.toLowerCase())}));const{page:o=1,perPage:c=10}=e||{};return{data:a,pagination:{page:o,perPage:c,total:a.length}}},p=async()=>await n.request(n.allClients(),{method:"POST"}),h=async e=>{const t=new Headers;t.append("Content-Type","application/json");const s=await fetch(n.allUsers(),{method:"POST",body:JSON.stringify(e),headers:t}).then(a=>a.json());if(!s.error)return s;throw new Error(s.error)},u=async e=>{const t=new Headers;t.append("Content-Type","application/json");const s=await fetch(n.user(e.id),{method:"PUT",body:JSON.stringify(e),headers:t}).then(a=>a.json());if(!s.error)return s;throw new Error(s.error)},w=async e=>fetch(n.user(e.id),{method:"DELETE"}),f=async e=>fetch(n.avatars(),{method:"POST",body:e,redirect:"follow"}).then(t=>t.json()),y=d("users",{state:()=>({items:[],clients:[],pagination:{page:1,perPage:10,total:0}}),actions:{async getAll(e){const{data:t,pagination:s}=await l({...e.filters,...e.sorting,...e.pagination});this.items=t,this.pagination=s},async getClientUsers(){this.clients=await p()},async add(e){const[t]=await h(e);return this.items.unshift(t),t},async update(e){const[t]=await u(e),s=this.items.findIndex(({id:a})=>a===e.id);return this.items.splice(s,1,t),t},async remove(e){if(await w(e)){const s=this.items.findIndex(({id:a})=>a===e.id);this.items.splice(s,1)}},async uploadAvatar(e){return f(e)}}});export{y as u};
//# sourceMappingURL=users-DylJnNym.js.map

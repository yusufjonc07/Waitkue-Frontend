import{y as j,z as A,d as N,f as m,b as v,c as C,h as l,w as u,e,t as k,u as f,F as U,i as w,A as V,k as O,r as y,g as M,B as E,j as F}from"./index-Bcr3mXlA.js";import{u as D}from"./useForm-fy7gsO6_.js";const B=j("user",{state:()=>{let i,n,a,o,s,c;const p=A();return{userName:((n=(i=p.currentUser)==null?void 0:i.profile)==null?void 0:n.fullname)||((a=p.currentUser)==null?void 0:a.username),email:(o=p.currentUser)==null?void 0:o.email,memberSince:(c=(s=p.currentUser)==null?void 0:s.profile)==null?void 0:c.created_at,pfp:"https://picsum.photos/id/23/200/300"}},actions:{changeUserName(p){this.userName=p}}}),T={class:"flex flex-col justify-center"},L={class:"text-[28px] md:text-[32px] leading-10 font-bold"},Y={class:"flex space-x-1 text-[13px] leading-4"},H=N({__name:"PreferencesHeader",setup(p){const i=B();return(n,a)=>{const o=m("VaAvatar");return v(),C(U,null,[l(o,{size:"large",color:"warning"},{default:u(()=>a[0]||(a[0]=[e("span",{class:"text-4xl"}," 👨‍💻 ",-1)])),_:1}),e("div",T,[e("h2",L,k(f(i).userName),1),e("div",Y,[a[1]||(a[1]=e("p",null,"Member since",-1)),e("p",null,k(f(i).memberSince),1)])])],64)}}}),b={"--va-button-font-size":"14px","--va-button-line-height":"20px"},G={class:"flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},J={class:"flex-1"},K={class:"max-w-[748px]"},Q={class:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},W={class:"flex-1"},X={class:"max-w-[748px]"},Z={class:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},ee={class:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-6 min-h-[36px] leading-5"},se={class:"flex-1"},te={class:"max-w-[748px]"},oe={class:"flex space-x-1 w-fit"},le=N({__name:"Settings",emits:["openNameModal","openResetPasswordModal"],setup(p,{emit:i}){const n=B(),a=i;return(o,s)=>{const c=m("VaButton"),x=m("VaDivider"),r=m("RouterLink");return v(),C(U,null,[e("div",G,[s[3]||(s[3]=e("p",{class:"font-bold w-[200px]"},"Name",-1)),e("div",J,[e("div",K,k(f(n).userName),1)]),l(c,{style:V(f(b)),class:"w-fit h-fit",preset:"primary",onClick:s[0]||(s[0]=g=>a("openNameModal"))},{default:u(()=>s[2]||(s[2]=[w(" Edit ")])),_:1},8,["style"])]),l(x),e("div",Q,[s[4]||(s[4]=e("p",{class:"font-bold w-[200px]"},"Email",-1)),e("div",W,[e("div",X,k(f(n).email),1)])]),e("div",Z,[s[6]||(s[6]=e("p",{class:"font-bold w-[200px]"},"Password",-1)),s[7]||(s[7]=e("div",{class:"flex-1"},[e("div",{class:"max-w-[748px]"},"•••••••••••••")],-1)),l(c,{style:V(f(b)),class:"w-fit h-fit",preset:"primary",onClick:s[1]||(s[1]=g=>a("openResetPasswordModal"))},{default:u(()=>s[5]||(s[5]=[w(" Reset Password ")])),_:1},8,["style"])]),l(x),e("div",ee,[s[10]||(s[10]=e("p",{class:"font-bold w-[200px]"},"Email subscriptions",-1)),e("div",se,[e("div",te,[s[9]||(s[9]=e("p",null,"To manage what emails you get, visit the",-1)),e("div",oe,[l(r,{to:{name:"settings"},class:"font-semibold text-primary"},{default:u(()=>s[8]||(s[8]=[w("Notification settings")])),_:1})])])])])],64)}}}),ae={class:"flex flex-col-reverse md:flex-row md:items-center md:justify-end md:space-x-4"},ne=N({__name:"EditNameModal",emits:["cancel"],setup(p,{emit:i}){const n=B(),{init:a}=O(),o=i,s=y(n.userName),c=()=>{if(!s.value||s.value===n.userName)return o("cancel");n.changeUserName(s.value),a({message:"You've successfully changed your name",color:"success"}),o("cancel")};return(x,r)=>{const g=m("VaInput"),$=m("VaButton"),P=m("VaForm"),d=m("VaModal");return v(),M(d,{"mobile-fullscreen":!1,size:"small","hide-default-actions":"","max-width":"380px","model-value":"","close-button":"","onUpdate:modelValue":r[2]||(r[2]=t=>o("cancel"))},{default:u(()=>[r[5]||(r[5]=e("h1",{class:"va-h5 mb-4"},"Reset password",-1)),l(P,{ref:"form",onSubmit:E(c,["prevent"])},{default:u(()=>[l(g,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=t=>s.value=t),class:"mb-4",label:"Name",placeholder:"Name"},null,8,["modelValue"]),e("div",ae,[l($,{style:V(f(b)),preset:"secondary",color:"secondary",onClick:r[1]||(r[1]=t=>o("cancel"))},{default:u(()=>r[3]||(r[3]=[w(" Cancel")])),_:1},8,["style"]),l($,{style:V(f(b)),class:"mb-4 md:mb-0",type:"submit",onClick:c},{default:u(()=>r[4]||(r[4]=[w(" Save")])),_:1},8,["style"])])]),_:1},512)]),_:1})}}}),de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"flex flex-col space-y-2"},ie={class:"flex space-x-2 items-center"},me={class:"flex space-x-2 items-center"},ue={class:"flex flex-col-reverse md:justify-end md:flex-row md:space-x-4"},pe=N({__name:"ResetPasswordModal",emits:["cancel"],setup(p,{emit:i}){const n=y(),a=y(),o=y(),{validate:s}=D("form"),{init:c}=O(),x=i,r=()=>{s()&&(c({message:"You've successfully changed your password",color:"success"}),x("cancel"))},g=[d=>!!d||"Old password field is required"],$=[d=>!!d||"New password field is required",d=>(d==null?void 0:d.length)>=8||"Must be at least 8 characters long",d=>new Set(d).size>=6||"Must contain at least 6 unique characters",d=>d!==n.value||"New password cannot be the same"],P=[d=>!!d||"Repeat new password field is required",d=>d===a.value||"Confirm password does not match new password"];return(d,t)=>{const R=m("VaInput"),z=m("VaIcon"),q=m("VaButton"),I=m("VaForm"),h=m("VaModal");return v(),M(h,{"max-width":"530px","mobile-fullscreen":!1,"hide-default-actions":"","model-value":"","close-button":"","onUpdate:modelValue":t[4]||(t[4]=S=>x("cancel"))},{default:u(()=>[t[10]||(t[10]=e("h1",{class:"va-h5 mb-4"},"Reset password",-1)),l(I,{ref:"form",class:"space-y-6",onSubmit:E(r,["prevent"])},{default:u(()=>{let S;return[e("div",de,[l(R,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=_=>n.value=_),rules:g,label:"Old password",placeholder:"Old password","required-mark":"",type:"password"},null,8,["modelValue"]),t[5]||(t[5]=e("div",{class:"hidden md:block"},null,-1)),l(R,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=_=>a.value=_),rules:$,label:"New password",placeholder:"New password","required-mark":"",type:"password"},null,8,["modelValue"]),l(R,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=_=>o.value=_),rules:P,label:"Repeat new password",placeholder:"Repeat new password","required-mark":"",type:"password"},null,8,["modelValue"])]),e("div",re,[e("div",ie,[e("div",null,[l(z,{name:((S=a.value)==null?void 0:S.length)>=8?"mso-check":"mso-close",color:"secondary",size:"20px"},null,8,["name"])]),t[6]||(t[6]=e("p",null,"Must be at least 8 characters long",-1))]),e("div",me,[e("div",null,[l(z,{name:new Set(a.value).size>=6?"mso-check":"mso-close",color:"secondary",size:"20px"},null,8,["name"])]),t[7]||(t[7]=e("p",null,"Must contain at least 6 unique characters",-1))])]),e("div",ue,[l(q,{style:V(f(b)),preset:"secondary",color:"secondary",onClick:t[3]||(t[3]=_=>x("cancel"))},{default:u(()=>t[8]||(t[8]=[w(" Cancel")])),_:1},8,["style"]),l(q,{style:V(f(b)),class:"mb-4 md:mb-0",type:"submit",onClick:r},{default:u(()=>t[9]||(t[9]=[w(" Update Password")])),_:1},8,["style"])])]}),_:1},512)]),_:1})}}}),ce={class:"flex flex-col p-4 space-y-10 bg-backgroundSecondary rounded-lg"},fe={class:"flex space-x-5"},xe={class:"space-y-4 md:space-y-6"},_e=N({__name:"Preferences",setup(p){const i=y(!1),n=y(!1);return(a,o)=>(v(),C(U,null,[o[4]||(o[4]=e("h1",{class:"page-title"},"Preferences",-1)),e("div",ce,[e("div",fe,[l(H)]),e("div",xe,[l(le,{onOpenNameModal:o[0]||(o[0]=s=>i.value=!0),onOpenResetPasswordModal:o[1]||(o[1]=s=>n.value=!0)})])]),i.value?(v(),M(ne,{key:0,onCancel:o[2]||(o[2]=s=>i.value=!1)})):F("",!0),n.value?(v(),M(pe,{key:1,onCancel:o[3]||(o[3]=s=>n.value=!1)})):F("",!0)],64))}});export{_e as default};
//# sourceMappingURL=Preferences-CxXLsTfG.js.map
